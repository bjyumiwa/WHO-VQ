<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no" />
  <title>WHO VQ â€” Character</title>

  <!-- èƒŒæ™¯å…ˆèª­ã¿ -->
  <link rel="preload" as="image" href="public/items/bg/sunrise.jpg" />
  <link rel="preload" as="image" href="public/items/bg/beach_day.jpg" />
  <link rel="preload" as="image" href="public/items/bg/night_beach.jpg" />

  <style>
    :root { --glass: rgba(255,255,255,.12); --text-shadow:0 2px 8px rgba(0,0,0,.55); }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0}
    body{
      font-family:system-ui,"Noto Sans JP","Hiragino Sans","Meiryo",sans-serif;
      color:#fff; background:#000 center/cover no-repeat fixed; overflow:auto;
    }
    #topbar{
      position:sticky; top:0; z-index:10; display:flex; justify-content:space-between; align-items:center;
      gap:8px; padding:10px 12px; background:linear-gradient(180deg,rgba(0,0,0,.55),rgba(0,0,0,0));
    }
    #langBox{ display:flex; align-items:center; gap:6px; padding:6px 10px; border-radius:999px; background:var(--glass); backdrop-filter: blur(6px); }
    #langSelect{ appearance:none; background:transparent; color:#fff; border:none; font-weight:700; cursor:pointer; }
    h1 { text-align:center; margin:8px 0 0; text-shadow:var(--text-shadow); font-size: clamp(22px,4.5vw,40px); }
    p.lead{ text-align:center; opacity:.92; margin:4px 0 18px; text-shadow:var(--text-shadow) }

    .grid{
      display:grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap:16px; padding:16px;
      max-width:1200px; margin:0 auto 40px;
    }
    .card{
      background:rgba(0,0,0,.28); border:1px solid rgba(255,255,255,.06);
      border-radius:18px; padding:16px; backdrop-filter: blur(4px);
      display:flex; flex-direction:column; align-items:center; gap:10px;
      box-shadow: 0 10px 24px rgba(0,0,0,.35);
    }
    .card img{ width:min(38vw, 240px); height:auto; object-fit:contain; filter: drop-shadow(0 10px 16px rgba(0,0,0,.45)); }
    .name{ font-weight:800; text-align:center; }
    .cap{ font-size:12px; opacity:.88 }
    .pick{ margin-top:6px; padding:8px 14px; border:none; border-radius:12px; background:#74c1e6cc; color:#fff; font-weight:800; cursor:pointer; }
    .back{
      position:fixed; left:12px; bottom:12px; padding:8px 12px; border-radius:999px; background:var(--glass);
      border:none; color:#fff; font-weight:700; cursor:pointer; backdrop-filter: blur(6px);
    }
  </style>
</head>
<body>
  <div id="topbar">
    <button class="back" onclick="location.href='index.html'">â†</button>
    <div style="flex:1"></div>
    <div id="langBox">
      <span>ğŸŒ</span>
      <select id="langSelect">
        <option value="ja">æ—¥æœ¬èª</option>
        <option value="en">English</option>
        <option value="zh">ä¸­æ–‡</option>
        <option value="ko">í•œêµ­ì–´</option>
      </select>
    </div>
  </div>

  <h1 data-i18n="char.title">ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚’é¸ã¶</h1>
  <p class="lead" data-i18n="char.note">â€»ãƒã‚«ãƒ­ãƒ³ã¯é€²åŒ–ã§ã¯ãªãã€Œè‰²ã®é¸æŠã€ã§ã™</p>

  <section class="grid" id="charGrid">
    <!-- ç¨®ã‚­ãƒ£ãƒ© 4 -->
    <div class="card">
      <img src="public/characters/tane_pink.png" alt="Mi (Pink)" loading="lazy">
      <div class="name">Miï¼ˆãƒ”ãƒ³ã‚¯ï¼‰/ Mi (Pink)</div>
      <div class="cap" data-i18n="char.seed">ã¯ã˜ã‚ã®ç›¸æ£’</div>
      <button class="pick" data-path="public/characters/tane_pink.png" data-i18n="char.choose">ã“ã®å­ã«ã™ã‚‹</button>
    </div>
    <div class="card">
      <img src="public/characters/tane_blue.png" alt="Be (Blue)" loading="lazy">
      <div class="name">Beï¼ˆãƒ–ãƒ«ãƒ¼ï¼‰/ Be (Blue)</div>
      <div class="cap" data-i18n="char.seed">ã¯ã˜ã‚ã®ç›¸æ£’</div>
      <button class="pick" data-path="public/characters/tane_blue.png" data-i18n="char.choose">ã“ã®å­ã«ã™ã‚‹</button>
    </div>
    <div class="card">
      <img src="public/characters/tane_green.png" alt="Co (Green)" loading="lazy">
      <div class="name">Coï¼ˆã‚°ãƒªãƒ¼ãƒ³ï¼‰/ Co (Green)</div>
      <div class="cap" data-i18n="char.seed">ã¯ã˜ã‚ã®ç›¸æ£’</div>
      <button class="pick" data-path="public/characters/tane_green.png" data-i18n="char.choose">ã“ã®å­ã«ã™ã‚‹</button>
    </div>
    <div class="card">
      <img src="public/characters/tane_purple.png" alt="Su (Purple)" loading="lazy">
      <div class="name">Suï¼ˆãƒ‘ãƒ¼ãƒ—ãƒ«ï¼‰/ Su (Purple)</div>
      <div class="cap" data-i18n="char.seed">ã¯ã˜ã‚ã®ç›¸æ£’</div>
      <button class="pick" data-path="public/characters/tane_purple.png" data-i18n="char.choose">ã“ã®å­ã«ã™ã‚‹</button>
    </div>

    <!-- ãƒã‚«ãƒ­ãƒ³ 4ï¼ˆè‰²é¸æŠï¼‰ -->
    <div class="card">
      <img src="public/assets/stage1/macaron_pink.png" alt="Macaron Pink" loading="lazy">
      <div class="name" data-i18n="char.m_pink">ãƒã‚«ãƒ­ãƒ³ï¼ˆãƒ”ãƒ³ã‚¯ï¼‰</div>
      <div class="cap" data-i18n="char.memo">è‰²ã®é¸æŠ</div>
      <button class="pick" data-path="public/assets/stage1/macaron_pink.png" data-i18n="char.choose">ã“ã®å­ã«ã™ã‚‹</button>
    </div>
    <div class="card">
      <img src="public/assets/stage1/macaron_blue.png" alt="Macaron Blue" loading="lazy">
      <div class="name" data-i18n="char.m_blue">ãƒã‚«ãƒ­ãƒ³ï¼ˆãƒ–ãƒ«ãƒ¼ï¼‰</div>
      <div class="cap" data-i18n="char.memo">è‰²ã®é¸æŠ</div>
      <button class="pick" data-path="public/assets/stage1/macaron_blue.png" data-i18n="char.choose">ã“ã®å­ã«ã™ã‚‹</button>
    </div>
    <div class="card">
      <img src="public/assets/stage1/macaron_green.png" alt="Macaron Green" loading="lazy">
      <div class="name" data-i18n="char.m_green">ãƒã‚«ãƒ­ãƒ³ï¼ˆã‚°ãƒªãƒ¼ãƒ³ï¼‰</div>
      <div class="cap" data-i18n="char.memo">è‰²ã®é¸æŠ</div>
      <button class="pick" data-path="public/assets/stage1/macaron_green.png" data-i18n="char.choose">ã“ã®å­ã«ã™ã‚‹</button>
    </div>
    <div class="card">
      <img src="public/assets/stage1/macaron_purple.png" alt="Macaron Purple" loading="lazy">
      <div class="name" data-i18n="char.m_purple">ãƒã‚«ãƒ­ãƒ³ï¼ˆãƒ‘ãƒ¼ãƒ—ãƒ«ï¼‰</div>
      <div class="cap" data-i18n="char.memo">è‰²ã®é¸æŠ</div>
      <button class="pick" data-path="public/assets/stage1/macaron_purple.png" data-i18n="char.choose">ã“ã®å­ã«ã™ã‚‹</button>
    </div>
  </section>

  <script>
    // ===== èƒŒæ™¯ï¼ˆindex ã¨åŒã˜ãƒ«ãƒ¼ãƒ«ï¼‰ =====
    (function setBg(){
      const h = new Date().getHours();
      let bg = "public/items/bg/beach_day.jpg";
      if (h >= 5 && h <= 8) bg = "public/items/bg/sunrise.jpg";
      else if (h >= 18 || h <= 4) bg = "public/items/bg/night_beach.jpg";
      document.body.style.backgroundImage = `url('${bg}')`;
    })();

    // ===== i18n å…±æœ‰ãƒ†ãƒ¼ãƒ–ãƒ« =====
    const I18N = {
      ja:{
        char:{ title:"ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚’é¸ã¶", note:"â€»ãƒã‚«ãƒ­ãƒ³ã¯é€²åŒ–ã§ã¯ãªãã€Œè‰²ã®é¸æŠã€ã§ã™", seed:"ã¯ã˜ã‚ã®ç›¸æ£’", choose:"ã“ã®å­ã«ã™ã‚‹",
               m_pink:"ãƒã‚«ãƒ­ãƒ³ï¼ˆãƒ”ãƒ³ã‚¯ï¼‰", m_blue:"ãƒã‚«ãƒ­ãƒ³ï¼ˆãƒ–ãƒ«ãƒ¼ï¼‰", m_green:"ãƒã‚«ãƒ­ãƒ³ï¼ˆã‚°ãƒªãƒ¼ãƒ³ï¼‰", m_purple:"ãƒã‚«ãƒ­ãƒ³ï¼ˆãƒ‘ãƒ¼ãƒ—ãƒ«ï¼‰" }
      },
      en:{
        char:{ title:"Choose Your Character", note:"*Macaron is a color choice, not evolution.", seed:"First companion", choose:"Choose",
               m_pink:"Macaron (Pink)", m_blue:"Macaron (Blue)", m_green:"Macaron (Green)", m_purple:"Macaron (Purple)" }
      },
      zh:{
        char:{ title:"é€‰æ‹©è§’è‰²", note:"*é©¬å¡é¾™åªæ˜¯é¢œè‰²é€‰æ‹©ï¼Œå¹¶éè¿›åŒ–ã€‚", seed:"æœ€åˆçš„ä¼™ä¼´", choose:"å°±é€‰TA",
               m_pink:"é©¬å¡é¾™ï¼ˆç²‰ï¼‰", m_blue:"é©¬å¡é¾™ï¼ˆè“ï¼‰", m_green:"é©¬å¡é¾™ï¼ˆç»¿ï¼‰", m_purple:"é©¬å¡é¾™ï¼ˆç´«ï¼‰" }
      },
      ko:{
        char:{ title:"ìºë¦­í„° ì„ íƒ", note:"*ë§ˆì¹´ë¡±ì€ ì§„í™”ê°€ ì•„ë‹ˆë¼ ìƒ‰ìƒ ì„ íƒì…ë‹ˆë‹¤.", seed:"ì²« ë™ë°˜ì", choose:"ì„ íƒ",
               m_pink:"ë§ˆì¹´ë¡±(í•‘í¬)", m_blue:"ë§ˆì¹´ë¡±(ë¸”ë£¨)", m_green:"ë§ˆì¹´ë¡±(ê·¸ë¦°)", m_purple:"ë§ˆì¹´ë¡±(í¼í”Œ)" }
      }
    };
    function getLang(){ return localStorage.getItem("whoai_lang") || navigator.language.slice(0,2) || "ja"; }
    function setLang(lang){ localStorage.setItem("whoai_lang", lang); document.documentElement.setAttribute("lang", lang); }
    function applyI18n(){
      const lang = (getLang() in I18N) ? getLang() : "ja";
      const dict = I18N[lang];
      document.querySelectorAll("[data-i18n]").forEach(el=>{
        const key = el.getAttribute("data-i18n");
        const value = key.split(".").reduce((o,k)=> o && o[k], dict);
        if (typeof value === "string") el.textContent = value;
      });
      document.getElementById("langSelect").value = lang;
    }
    setLang(getLang()); applyI18n();
    document.getElementById("langSelect").addEventListener("change", e=>{ setLang(e.target.value); applyI18n(); });

    // ===== ç”»åƒé¸æŠ â†’ ä¿å­˜ â†’ æ¬¡ã®ãƒšãƒ¼ã‚¸ã¸ =====
    function selectChar(path){
      localStorage.setItem("whoai_character_src", path);   // asari.html ã§èª­ã‚€
      localStorage.setItem("whoai_lastPage", "asari.html"); // ç¶šãã‹ã‚‰ç”¨
      location.href = "asari.html";
    }
    document.querySelectorAll(".pick").forEach(btn=>{
      btn.addEventListener("click", ()=> selectChar(btn.dataset.path));
    });

    // ç¾åœ¨ãƒšãƒ¼ã‚¸åã®ä¿å­˜
    localStorage.setItem("whoai_lastPage", "char.html");
  </script>
</body>
</html>
