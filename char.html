<!DOCTYPE html>
<link rel="preload" href="public/assets/bg_beach_day.jpg" as="image">
<link rel="stylesheet" href="web/style.css">
<script defer src="web/talk.js"></script>
</head>
<body data-page="char">
<div class="bg" style="background-image:url('public/assets/bg_beach_day.jpg')"></div>
<header class="topbar">
<img src="public/assets/logo_who_vq.png" alt="WHO VQ" class="logo"/>
<div class="right">
<select id="langSelect" aria-label="language"></select>
</div>
</header>


<main class="center">
<h1 data-i18n="char_title">キャラを選ぶ</h1>
<div class="char-grid">
<button class="card" data-char="pink"><img src="public/assets/character_sample.png" alt="char"/><span>Pink</span></button>
<button class="card" data-char="blue"><img src="public/assets/character_sample.png" alt="char"/><span>Blue</span></button>
<button class="card" data-char="green"><img src="public/assets/character_sample.png" alt="char"/><span>Green</span></button>
<button class="card" data-char="purple"><img src="public/assets/character_sample.png" alt="char"/><span>Purple</span></button>
</div>


<div class="name-wrap">
<label><input type="checkbox" id="chkNoName"> <span data-i18n="no_name">名前を付けない</span></label>
<input id="inpCharName" class="input" placeholder="キャラの名前" maxlength="20">
</div>


<div class="buttons">
<button class="btn primary" id="btnNext" data-i18n="next">次へ</button>
</div>
</main>


<script>
let selected = null;
window.addEventListener('DOMContentLoaded', () => {
initLang();
document.querySelectorAll('.card').forEach(b=>{
b.onclick = ()=>{
document.querySelectorAll('.card').forEach(x=>x.classList.remove('sel'));
b.classList.add('sel');
selected = b.dataset.char;
};
});
const chk = document.getElementById('chkNoName');
const inp = document.getElementById('inpCharName');
chk.addEventListener('change', ()=>{ inp.disabled = chk.checked; if(chk.checked){ inp.value=''; } });
document.getElementById('btnNext').onclick = ()=>{
if(!selected){ return toast(getText('pick_char_first')); }
const name = chk.checked ? '' : (inp.value||'');
localStorage.setItem('who_charColor', selected);
localStorage.setItem('who_charName', name);
localStorage.setItem('who_lastPage', 'beach.html');
location.href = 'beach.html';
};
});
</script>
</body>
</html>
